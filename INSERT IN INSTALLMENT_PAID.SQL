CREATE OR REPLACE PROCEDURE INSERT_INSTALLMENTS_PAID
AS
CURSOR CON_CURS IS
SELECT*FROM CONTRACTS;
V_AMOUNT NUMBER(8,2);
V_ADDED_MONTH NUMBER;
V_INSTALLMENT_DATE DATE;
BEGIN

FOR CON_RECORD IN CON_CURS LOOP
   
   V_ADDED_MONTH:= CALC_AMOUNT_MONTHADDED(CON_RECORD,V_AMOUNT);--THIS FUNCTION TO CALC AMOUNT AND THAT MONTH WILL BE ADD FOR EACH ROW
    
    V_INSTALLMENT_DATE:=CON_RECORD.CONTRACT_STARTDATE;
   
   
   FOR STEPS IN 1..CON_RECORD.PAYMENTS_INSTALLMENTS_NO LOOP
     
       
       
       INSERT INTO INSTALLMENTS_PAID(INSTALLMENT_ID,CONTRACT_ID,INSTALLMENT_DATE,INSTALLMENT_AMOUNT,PAID)VALUES
       ( INSTALLMENTS_PAID_SEQ.NEXTVAL,CON_RECORD.CONTRACT_ID,V_INSTALLMENT_DATE,V_AMOUNT,0);
       
       V_INSTALLMENT_DATE:=ADD_MONTHS ( V_INSTALLMENT_DATE,V_ADDED_MONTH);
       
   END LOOP;
   


END LOOP;





END;
SELECT*FROM USER_ERRORS;